{% extends "base.html" %}
{% block title %}Service Logs - Tokatap{% endblock %}
{% block content %}
<div class="lg-glass lg-card-lg round-2xl mb-6 max-w-lg mx-auto">
  <div class="h2 mb-2">Service Logs</div>
  {% if logs %}
  <div class="space-y-2">
    {% for log in logs %}
    <div class="cell">
      <div>
        <div>{{ log.description }}</div>
        <div class="text-xs text-dim mt-1">
          {{ log.timestamp.strftime('%d %b %Y, %I:%M %p') if log.timestamp else '' }}
          {% if log.status %}
          • <span class="{{ 'text-green-400' if log.status == 'Completed' else 'text-warning' }}">{{ log.status }}</span>
          {% endif %}
        </div>
      </div>
      {% if log.status != 'Completed' and current_user.is_authenticated %}
      <form method="POST" action="{{ url_for('routes.complete_service_log', log_id=log.id) }}">
        <button type="submit" class="btn btn-primary text-xs">Mark Complete</button>
      </form>
      {% endif %}
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="lg-glass lg-card round-2xl text-dim">No service logs found for this tag yet.</div>
  {% endif %}
  <div class="mt-6 flex justify-between">
    <a href="{{ url_for('routes.scan_service', service_tag_id=service_tag.id) }}" class="btn btn-secondary">← Back</a>
    <a href="{{ url_for('routes.add_service_log', service_tag_id=service_tag.id) }}" class="btn btn-primary">Log New Service</a>
  </div>
</div>
{% endblock %}
