<!DOCTYPE html>
<html>
<head>
  <title>Choose Action</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-100 to-white min-h-screen px-2 py-6">

  <!-- Back Button -->
  <div class="max-w-sm sm:max-w-md w-full mx-auto mt-2 mb-2 px-1">
    <a href="{{ back_url }}" class="inline-flex items-center px-4 py-1.5 border border-blue-400 text-blue-600 hover:text-blue-800 rounded-xl text-sm font-medium hover:bg-blue-50 transition shadow-sm">
      ‚Üê Back to Dashboard
    </a>
  </div>

  <!-- Main Card -->
  <div class="bg-white/30 backdrop-blur-lg border border-white/20 shadow-lg rounded-2xl p-6 sm:p-10 w-full max-w-sm sm:max-w-md mx-auto mt-2 text-center">

    <!-- Logo -->
    <img src="{{ url_for('static', filename='logo/logo.svg') }}" class="mx-auto h-10 sm:h-14 mb-4 sm:mb-6" alt="Logo">
    
    <!-- Sub QR Info -->
    <h2 class="text-lg sm:text-xl font-semibold text-slate-800 mb-4 sm:mb-6">
      Sub QR: {{ sub_tag.tag_type }}
    </h2>

    <!-- Show user type (for debugging, optional) -->
    {% if current_user.is_authenticated and current_user.role == "user" %}
      <div class="mb-2 text-xs text-slate-500">Logged in as Main User</div>
    {% elif session.subuser_id %}
      <div class="mb-2 text-xs text-slate-500">Logged in as Sub-user</div>
    {% endif %}

    {% if current_user.is_authenticated or session.subuser_id %}
      <!-- Action Buttons -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6">

        <!-- Needle Change -->
        <a href="{{ url_for('routes.sub_tag_view', sub_tag_id=sub_tag.id) }}"
          class="flex flex-col items-center justify-center bg-white/60 hover:bg-green-100 rounded-xl shadow p-4 transition border border-green-400 hover:border-green-600">
          <img src="{{ url_for('static', filename='emb assets/needle.png') }}" alt="Needle" class="h-8 sm:h-10 mb-2">
          <span class="text-green-700 font-semibold text-sm sm:text-base">Needle Change</span>
        </a>

        <!-- Service Part -->
        <a href="{{ url_for('routes.sub_tag_service_log', sub_tag_id=sub_tag.id) }}"
          class="flex flex-col items-center justify-center bg-white/60 hover:bg-blue-100 rounded-xl shadow p-4 transition border border-blue-400 hover:border-blue-600">
          <img src="{{ url_for('static', filename='emb assets/setting.png') }}" alt="Setting" class="h-8 sm:h-10 mb-2">
          <span class="text-blue-700 font-semibold text-sm sm:text-base">Service Part</span>
        </a>
      </div>
    {% else %}
      <div class="mt-6 text-red-600 text-sm font-semibold">Please log in as a user or sub-user to access actions.</div>
    {% endif %}
  </div>
</body>
</html>
